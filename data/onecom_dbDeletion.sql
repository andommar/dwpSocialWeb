
-- Refill database

-- Triggers (not needed)
DROP TRIGGER add_post_total_comments;
DROP TRIGGER substract_post_total_comments;

-- Tables
DROP TABLE USER_MESSAGE;
DROP TABLE USER_VOTES_POST;
DROP TABLE POST_TAG;
DROP TABLE TAG;
DROP TABLE USER_CATEGORY;

-- FKs (USER) > We delete the USER role_name FK to the table ROLE
ALTER TABLE `USER`
DROP FOREIGN KEY USER_ibfk_1;
DROP TABLE `ROLE`;

-- FKs (POST) >  We delete all the POST FKs (category_name, user_id)
ALTER TABLE POST
DROP FOREIGN KEY POST_ibfk_1;
ALTER TABLE POST
DROP FOREIGN KEY POST_ibfk_2;

DROP TABLE CATEGORY;

-- FKs (COMMENT)
ALTER TABLE `COMMENT`
DROP FOREIGN KEY COMMENT_ibfk_1;
ALTER TABLE `COMMENT`
DROP FOREIGN KEY COMMENT_ibfk_2;
ALTER TABLE `COMMENT`
DROP FOREIGN KEY COMMENT_ibfk_3;

-- FKs (MEDIA)
ALTER TABLE `MEDIA`
DROP FOREIGN KEY MEDIA_ibfk_1;

DROP TABLE MEDIA;
DROP TABLE COMMENT;
DROP TABLE POST;
DROP TABLE `USER`;

